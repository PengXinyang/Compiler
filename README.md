# 2024北航编译技术实验

本项目是2024年的实验

其中文法的定义参见文法.pdf

各部分设计请参阅设计文档

## 期中测试

添加了如下文法：

```c++
Assign → '+=' | '-=' | '*=' | '/=' | '%=' //以前的单一赋值号变成了多个赋值号
Stmt → LVal Assign Cond '?' Exp ':' Exp ';'//三目运算符
```

同时修改了以下文法：

```c++
Stmt → LVal Assign Exp ';'
Stmt → LVal Assign 'getint' '(' ')' ';'
Stmt → LVal Assign 'getchar' '(' ')' ';'
ForStmt → LVal Assign Exp
```

修改原有的程序，使之能满足上述规则

### 个人思路

首先，在词法分析部分，主要是处理那几个赋值号；本来是+的，现在要读下一位，看是不是=；对于/=，本人的除号在注释部分判断，所以是先判断注释，再判断/=，再判断/

其次，在语法分析部分，添加新的函数Assign()，处理赋值号的树；对于修改的文法，将以前”连接=号“直接改为”连接Assign()节点“

对于三目运算符，首先在LVal部分，由于Cond和Exp是基本重合的，所以必须采用回溯的算法（预读理论上可以卡）。预读Cond，如果下一位是"?"就说明是三目运算符，否则是LVal Assign Exp;